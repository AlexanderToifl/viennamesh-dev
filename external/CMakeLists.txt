IF(VIENNAMESH_WITH_NETGEN)
  set(LOCAL_LIBVIENNAMESH_COMPILE_FLAGS "${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS} -DVIENNAMESH_WITH_NETGEN")
  if (VIENNAMESH_NETGEN_WITH_OPENCASCADE)
    set(LOCAL_LIBVIENNAMESH_COMPILE_FLAGS "${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS} -DVIENNAMESH_NETGEN_WITH_OPENCASCADE")

    find_package(OpenCASCADE REQUIRED)
    include_directories(${OpenCASCADE_INCLUDE_DIR})
    link_directories(${OpenCASCADE_LINK_DIR})

    set(LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS} ${OpenCASCADE_INCLUDE_DIR})
  endif (VIENNAMESH_NETGEN_WITH_OPENCASCADE)

  set(NETGEN_SOURCE_DIR ${EXTERNAL_SOURCE_DIR}/netgen/)

  add_subdirectory(netgen)

  SET(LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS} ${NETGEN_SOURCE_DIR}/libsrc/include)
  SET(LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES} viennamesh-netgen)
endif(VIENNAMESH_WITH_NETGEN)


IF(VIENNAMESH_WITH_TETGEN)
  set(LOCAL_LIBVIENNAMESH_COMPILE_FLAGS "${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS} -DVIENNAMESH_WITH_TETGEN")
  set(TETGEN_SOURCE_DIR ${EXTERNAL_SOURCE_DIR}/tetgen/)

  add_subdirectory(tetgen)

  SET(LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS} ${TETGEN_SOURCE_DIR}/)
  SET(LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES} viennamesh-tetgen)
ENDIF(VIENNAMESH_WITH_TETGEN)


IF(VIENNAMESH_WITH_TRIANGLE)
  set(LOCAL_LIBVIENNAMESH_COMPILE_FLAGS "${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS} -DVIENNAMESH_WITH_TRIANGLE")
  set(TRIANGLE_SOURCE_DIR ${EXTERNAL_SOURCE_DIR}/triangle/)

  add_subdirectory(triangle)

  SET(LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES} viennamesh-triangle)
  SET(LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS} ${TRIANGLE_SOURCE_DIR}/)
ENDIF(VIENNAMESH_WITH_TRIANGLE)


IF(VIENNAMESH_WITH_VGMODELER)
  set(LOCAL_LIBVIENNAMESH_COMPILE_FLAGS "${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS} -DVIENNAMESH_WITH_VGMODELER")
  set(VGMODELER_SOURCE_DIR ${EXTERNAL_SOURCE_DIR}/vgmodeler/)

  add_subdirectory(vgmodeler)

  SET(LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES} viennamesh-vgmodeler)
ENDIF(VIENNAMESH_WITH_VGMODELER)

# message(STATUS "external include dirs: ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS}")
# message(STATUS "external libraries: ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES}")
# message(STATUS "local libviennamesh compile flags: ${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS}")

SET(VIENNAMESH_EXTERNAL_INCLUDE_DIRS ${LOCAL_VIENNAMESH_EXTERNAL_INCLUDE_DIRS} PARENT_SCOPE)
SET(VIENNAMESH_EXTERNAL_LIBRARIES ${LOCAL_VIENNAMESH_EXTERNAL_LIBRARIES} PARENT_SCOPE)
SET(LIBVIENNAMESH_COMPILE_FLAGS "${LIBVIENNAMESH_COMPILE_FLAGS} ${LOCAL_LIBVIENNAMESH_COMPILE_FLAGS}" PARENT_SCOPE)
